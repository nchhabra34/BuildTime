<?xml version='1.1' encoding='UTF-8'?>
<project>
  <actions/>
  <description>This will be the CI job for YSL running from 192.168.210.72</description>
  <keepDependencies>false</keepDependencies>
  <properties/>
  <scm class="hudson.scm.NullSCM"/>
  <assignedNode>192.168.210.72</assignedNode>
  <canRoam>false</canRoam>
  <disabled>false</disabled>
  <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
  <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
  <triggers>
    <hudson.triggers.TimerTrigger>
      <spec>00,30 * * * *</spec>
    </hudson.triggers.TimerTrigger>
  </triggers>
  <concurrentBuild>false</concurrentBuild>
  <builders>
    <hudson.tasks.Shell>
      <command>source ~/.bash_profile
cd /opt/build/src/razor_wealthservicenpr/razor/wealthservice/new.product.release/build_scripts
source build.conf


BNB=`grep Build_Number ci.properties |awk -F= &apos;{print $2}&apos;`
sh ci_commonwealthservicebuild.sh ci
BNA=`grep Build_Number ci.properties |awk -F= &apos;{print $2}&apos;`

rm -rf UPDATEDB &gt; /dev/null

# Get Build revision #
#revision=`cat buildlogs/sync.log |tail -1|awk -F@ &apos;{print $2}&apos;|cut -d&apos; &apos; -f1`
revision=$BNA

if ! [[ $revision =~ ^-?[0-9]+$ ]]
then
  echo &quot;*** Build Revision Not found ***&quot;
  exit 1
fi

if [ &quot;$BNB&quot; -eq &quot;$BNA&quot; ]
then
  echo &quot;No New Build, skipping updating tinyDB ..&quot;
else
  echo &quot;New Build, Updating tinyDB with Build #: $BNA&quot;
  echo &quot;product=wealthservice&quot; &gt;  UPDATEDB
  echo &quot;branch=npr&quot; &gt;&gt;  UPDATEDB
  echo &quot;buildtype=CI&quot; &gt;&gt;  UPDATEDB
  echo &quot;revision=$revision&quot; &gt;&gt; UPDATEDB
fi


</command>
    </hudson.tasks.Shell>
  </builders>
  <publishers>
    <hudson.plugins.parameterizedtrigger.BuildTrigger plugin="parameterized-trigger@2.35.2">
      <configs>
        <hudson.plugins.parameterizedtrigger.BuildTriggerConfig>
          <configs>
            <hudson.plugins.parameterizedtrigger.FileBuildParameters>
              <propertiesFile>/opt/build/src/razor_wealthservicenpr/razor/wealthservice/new.product.release/build_scripts/UPDATEDB</propertiesFile>
              <failTriggerOnMissing>false</failTriggerOnMissing>
              <textParamValueOnNewLine>false</textParamValueOnNewLine>
              <useMatrixChild>false</useMatrixChild>
              <onlyExactRuns>false</onlyExactRuns>
            </hudson.plugins.parameterizedtrigger.FileBuildParameters>
          </configs>
          <projects>wealthservice_npr_CI_usetinydb</projects>
          <condition>SUCCESS</condition>
          <triggerWithNoParameters>false</triggerWithNoParameters>
          <triggerFromChildProjects>false</triggerFromChildProjects>
        </hudson.plugins.parameterizedtrigger.BuildTriggerConfig>
      </configs>
    </hudson.plugins.parameterizedtrigger.BuildTrigger>
  </publishers>
  <buildWrappers/>
</project>